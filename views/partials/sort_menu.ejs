

<!-- Offcanvas Menu -->
<div class="offcanvas offcanvas-end" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header">
        <h5 id="offcanvasRightLabel">Settings</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <% if (userName) { %>
            <p class="mb-3">Welcome, <%= userName %>!</p>
            <form action="/logout" method="POST" style="display: inline;">
                <button type="submit" class="btn btn-secondary">Log Out</button>
                <span><br><br></span>
            </form>
        <% } else { %>
            <p class="mb-3">Not logged in</p>
                <a href="/signin">sign in</a>
                <a href="/signup">sign up</a>
        <% } %>
        <form class="form-inline" method="get" action="/">
            <div class="form-group mb-3">
                <input type="text" name="search" class="form-control" placeholder="Search by name" value="<%= search || '' %>">
            </div>
            <div class="form-group mb-3">
                <select name="sort" class="form-control">
                    <option value="">Sort by</option>
                    <option value="name" <%= sort === 'name' ? 'selected' : '' %>>Name</option>
                    <option value="rating" <%= sort === 'rating' ? 'selected' : '' %>>Rating</option>
                    <option value="date" <%= sort === 'date' ? 'selected' : '' %>>Release Date</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Apply</button>
        </form>
            <% if (userName) { %>
                <h3>Your Cart</h3>
                <ul>
                    <% cart.forEach(item => { %>
                        <li style="display: flex; align-items: center;">
                            <img src="<%= item.posterUrl %>" alt="<%= item.name %>" style="width: 50px; height: 75px; margin-right: 10px;">
                            <%= item.name %>
                            <form action="/cart/remove" method="POST" style="display: inline; margin-left: 10px;">
                                <input type="hidden" name="movieId" value="<%= item._id %>">
                                <button type="submit" style="background: none; border: none; color: red; cursor: pointer;">&times;</button>
                            </form>
                        </li>
                    <% }) %>
                </ul>
            <% }%>
    </div>
</div>
